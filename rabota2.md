# Контрольная работа 2 
Евишкин Алексей УИБО-04-24

# Задание 1
<img width="2551" height="1258" alt="image" src="https://github.com/user-attachments/assets/65e4b1fe-830d-42dd-acd3-a44655d1a709" />

Введённые данные были такими: email: ' or 1=1;-- password:

В результате этого ввода произошла успешная SQL-инъекция. Вероятно, базовый запрос к базе данных имел форму: SELECT * FROM Users WHERE email = '' AND password = ''; После внедрения указанных данных он трансформировался в: SELECT * FROM Users WHERE email = '' OR 1=1;--' AND password='…'; Условие OR 1=1 делает выражение истинным для всех записей, а символы -- превращают оставшуюся часть запроса в комментарий. Это приводит к игнорированию проверки пароля, позволяя осуществить несанкционированный вход.

Что касается OWASP Juice Shop, авторизация там функционирует посредством JWT (JSON Web Tokens). Это base64url-кодированные JSON-данные, которые приложение помещает в cookie token (иногда дублируя их в заголовке Authorization: Bearer). После успешного входа в систему, браузер автоматически передаёт этот cookie со всеми последующими запросами к серверу.

## Ответы к заданию 1
1) Что такое SQL-инъекция?
SQL-инъекция — это разновидности кибератаки, при которой злоумышленник внедряет вредоносный SQL-код в поля ввода приложения. Из-за некорректной обработки, этот ввод интерпретируется системой как часть запроса к базе данных, что приводит к выполнению команд, отличных от задуманных разработчиком.

2) Почему строка ' or 1=1;-- дала доступ к админ-аккаунту?
Введённая строка ' or 1=1;-- позволяет обойти аутентификацию. Фрагмент OR 1=1 делает условие в операторе WHERE всегда истинным, вынуждая запрос вернуть все записи из таблицы пользователей. Символы -- (комментарий) отсекают остаток первоначального запроса, включая проверку пароля. В результате приложение считает, что "некий" пользователь найден (зачастую им оказывается первый в списке — администратор) и предоставляет ему доступ.

3) Как защититься от таких атак?
Основной метод предотвращения — это применение параметризованных запросов (или prepared statements), которые гарантируют, что данные, введённые пользователем, всегда интерпретируются как значения, а не как часть SQL-кода. В качестве дополнительных мер безопасности рекомендуется применять строгую серверную валидацию входных данных, внедрять принцип наименьших привилегий для учётных записей базы данных, использовать ORM-фреймворки и проводить регулярные аудиты безопасности.

# Задание 2
<img width="1308" height="914" alt="image" src="https://github.com/user-attachments/assets/5c9bc0cf-3590-43db-8027-0017f9cf314e" />
<img width="1014" height="349" alt="image" src="https://github.com/user-attachments/assets/988c5e6e-de62-43b9-8880-6319d99b6278" />


В токене были найдены:
1) логин: admin@juice-sh.op
2) хэш пароля: 0192023a7bbd73250516f069df18b500
3) восстановленный пароль: admin123
4) Куки (Cookie) – это крохотные фрагменты данных, которые веб-сайт сохраняет в браузере пользователя. Их основная функция — хранить сессионные идентификаторы, пользовательские настройки или токены авторизации, позволяя ресурсу "узнавать" посетителя при последующих обращениях.
5) Защита от подобных атак включает применение параметризованных SQL-запросов, строгую валидацию и фильтрацию всех входных данных, ограничение прав доступа к базе данных, использование хэширования для паролей и проведение регулярных проверок безопасности. Такой комплексный подход исключает возможность внедрения вредоносного SQL-кода через поля ввода.


# Задание 3
1. Параметр bid — это идентификатор корзины (Basket ID).
2. Недопустимо доверять параметру bid, полученному от клиента, так как пользователь имеет возможность его вручную изменить. Сервер обязан на каждом шаге убеждаться в подлинной принадлежности корзины текущему авторизованному пользователю. Любые манипуляции с содержимым корзины — будь то её просмотр, добавление новых товаров или удаление существующих — должны выполняться исключительно после строгой проверки прав доступа.


# Задание 4

Пример вредоносного ввода:
<iframe src="javascript:alert(`Block`)">
<img width="865" height="304" alt="image" src="https://github.com/user-attachments/assets/489b584a-03a9-4202-9596-15f009a30bd8" />

