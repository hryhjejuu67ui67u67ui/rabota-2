# Контрольная работа 2 
Евишкин Алексей УИБО-04-24

# Задание 1
<img width="2551" height="1258" alt="image" src="https://github.com/user-attachments/assets/65e4b1fe-830d-42dd-acd3-a44655d1a709" />

Для входа использовались данные:
email: " ' or 1=1;--"
password: " "

Войти удалось потому что приложение, скорее всего, формирует такой SQL-запрос:

SELECT *  
FROM Users  
WHERE email = '<введённый email>'  
  AND password = '<введённый пароль>';

После подстановки вредоносной строки получается:

SELECT *  
FROM Users  
WHERE email = '' OR 1=1;--'  
  AND password = 'любое_значение';

- 1=1 всегда истинно → условие WHERE проходит для всех записей  
- -- превращает остаток строки в комментарий → проверка пароля просто игнорируется  
В итоге система авторизует первого пользователя из выборки.

В Juice Shop авторизация строится на JWT.  
Токен кладётся в cookie token=<jwt> и иногда дублируется через Authorization: Bearer.

---

## Ответы к заданию 1
1) Что такое SQL-инъекция?
SQL-инъекция — это разновидности кибератаки, при которой злоумышленник внедряет вредоносный SQL-код в поля ввода приложения. Из-за некорректной обработки, этот ввод интерпретируется системой как часть запроса к базе данных, что приводит к выполнению команд, отличных от задуманных разработчиком.

2) Почему строка ' or 1=1;-- дала доступ к админ-аккаунту?
Введённая строка ' or 1=1;-- позволяет обойти аутентификацию. Фрагмент OR 1=1 делает условие в операторе WHERE всегда истинным, вынуждая запрос вернуть все записи из таблицы пользователей. Символы -- (комментарий) отсекают остаток первоначального запроса, включая проверку пароля. В результате приложение считает, что "некий" пользователь найден (зачастую им оказывается первый в списке — администратор) и предоставляет ему доступ.

3) Как защититься от таких атак?
Основной метод предотвращения — это применение параметризованных запросов (или prepared statements), которые гарантируют, что данные, введённые пользователем, всегда интерпретируются как значения, а не как часть SQL-кода. В качестве дополнительных мер безопасности рекомендуется применять строгую серверную валидацию входных данных, внедрять принцип наименьших привилегий для учётных записей базы данных, использовать ORM-фреймворки и проводить регулярные аудиты безопасности.

# Задание 2
<img width="1308" height="914" alt="image" src="https://github.com/user-attachments/assets/5c9bc0cf-3590-43db-8027-0017f9cf314e" />
<img width="1574" height="539" alt="image" src="https://github.com/user-attachments/assets/fda8ff068-e682-4edc-a149-cf6427831426" />

В токене были найдены:
- логин: username  
- хэш пароля: 0192023a7bbd73250516f069df18b500  
- восстановленный пароль: admin123  

1. Cookie — это маленькое хранилище данных, которое браузер отправляет сайту автоматически (часто используется для JWT).  
2. Чтобы закрыть уязвимость:
   - не хранить пароли и тем более их хэши в токене,  
   - использовать безопасные алгоритмы хеширования (bcrypt/Argon2),  
   - настраивать cookie: HttpOnly, Secure, SameSite, короткое время жизни.

---

# Задание 3
1. Параметр bid — это идентификатор корзины (Basket ID).  
2. Доверять пользовательскому bid нельзя → сервер должен сверять владельца корзины перед выполнением операций. Проверки должны проводиться на каждом запросе: просмотр, добавление и удаление товаров.

---

# Задание 4
<img width="1555" height="232" alt="image" src="https://github.com/user-attachments/assets/01620605-97ff-454b-b4f1-cad89a859983" />

Пример вредоносного ввода:
<iframe src="javascript:alert(xss)">
